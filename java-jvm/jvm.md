[TOC]




## JVM工具

jps ：显示当前系统全部java进程
jstack ：加上进程号，可以查询进程内部线程的状态及堆栈信息
jmap ：




## 调优参数

	-Xms ：堆的最小值。初始容量，若跟最大值一样，可以避免堆自动扩容。
	-Xmx ：堆的最大值。
	-Xmn ：年轻代容量。
	-Xss ：栈的容量。



## 面试题

### 一个进程有三个线程，如果一个线程抛出OOM，其他两个线程还可以运行吗

　　A ：当该线程OOM后，占据的内存资源会被全部释放，不影响其他线程运行。





### JVM调优

#### 目的

　　从性能的角度看，关注三个方面：内存占用（footprint）、延时（latency）、吞吐量（throughput）。一般情况调优会侧重一个或两个方面，很少兼顾三个方面。还可以能考虑其他方面。


### 垃圾收集器

#### G1

内存结构

　　G1将内存划分为一定数量（2048左右）且大小相等（1M-32M间2的幂）的region（区域），分别作为Eden、Survivor、Old。并将超过region容量50%的对象作为Humongous对象。

存在问题

　　如此分配region存在region大小和大对象难以保持一致，导致空间浪费的问题。解决办法：直接设置较大的region，参数 -XX:G1HeapRegionSize=16M

GC算法

　　G1使用的是复合算法：

- 新生代 ：使用并行的复制算法，会发生Stop-The-World
- 老年代 ：大部分情况使用并发标记，整理是和新生代GC时顺便进行，增量进行的整理。

　　新生代GC（Young GC）一般叫做Minor GC，老年代GC叫做Major GC，整体GC叫做Full GC